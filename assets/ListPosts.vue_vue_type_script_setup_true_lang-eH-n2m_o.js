import{d as k,k as w,l as v,j as S,m as z,e as a,o as s,p as o,i as l,F as h,r as D,a as r,q as B,t as i,n as C,c as F,s as I,v as L,w as P,x as V}from"./app-CRNcMM4E.js";const E={class:"posts"},N={key:0,class:"py2 op50"},R={class:"no-underline flex flex-col md:flex-row gap-2 md:items-center"},Y={class:"title text-lg leading-1.2em flex gap-2 wrap"},G={key:0,class:"align-middle flex-none text-xs bg-zinc:15 text-zinc5 rounded px-1 py-0.5 ml--12 mr2 my-auto hidden md:block"},O={class:"align-middle tracking-wider"},U={class:"flex gap-2 items-center op50 text-sm font-light font-serif-extra font-italic"},W={key:0,class:"align-middle op50 flex-none text-xs ml--1 mt--1 i-carbon-arrow-up-right",title:"External"},j={key:1,class:"i-ri:group-2-line align-middle op50 flex-none",title:"In person"},q={key:2,class:"i-ri:film-line align-middle op50 flex-none",title:"Provided in video"},M={key:3,class:"i-ri:radio-line align-middle op50 flex-none",title:"Provided in radio"},A={key:4,class:"ws-nowrap"},H={key:5,class:"op80 ws-nowrap"},J={key:6,class:"op80 ws-nowrap"},K={key:7,class:"op80 ws-nowrap"},Q={key:8,class:"align-middle flex-none text-xs bg-zinc:15 text-zinc5 rounded px-1 py-0.5 my-auto md:hidden"},Z=k({__name:"ListPosts",props:{type:{},posts:{},extra:{}},setup(u){const d=u,_=w().getRoutes().filter(e=>{var n,t;return(((n=e.name)==null?void 0:n.toString().startsWith("posts-"))||((t=e.name)==null?void 0:t.toString().startsWith("notes-")))&&e.meta.frontmatter.date&&!e.meta.frontmatter.draft}).filter(e=>!e.path.includes(".html")&&(e.meta.frontmatter.type||"blog").split("+").includes(d.type)).map(e=>({path:e.meta.frontmatter.redirect||e.path,title:e.meta.frontmatter.title,date:e.meta.frontmatter.date,lang:e.meta.frontmatter.lang,duration:e.meta.frontmatter.duration,recording:e.meta.frontmatter.recording,upcoming:e.meta.frontmatter.upcoming,redirect:e.meta.frontmatter.redirect,place:e.meta.frontmatter.place})),c=v(()=>[...d.posts||_,...d.extra||[]].sort((e,n)=>+new Date(n.date)-+new Date(e.date)).filter(e=>!S.value||e.lang!=="zh")),m=e=>new Date(e).getFullYear(),p=e=>e&&new Date(e)>new Date,x=(e,n)=>e&&n&&m(e)===m(n);function y(e,n){return p(e.date)===p(n==null?void 0:n.date)&&x(e.date,n==null?void 0:n.date)}function f(e){return p(e.date)?"Upcoming":m(e.date)}return z(()=>{const e=sessionStorage.getItem("visited-notes");console.log("hasVisited",e),e?document.documentElement.classList.add("no-sliding"):sessionStorage.setItem("visited-notes",new Date().toISOString())}),(e,n)=>(s(),a("ul",E,[l(c).length?o("",!0):(s(),a("div",N," { nothing here yet } ")),(s(!0),a(h,null,D(l(c),(t,g)=>(s(),a(h,{key:t.path},[y(t,l(c)[g-1])?o("",!0):(s(),a("div",{key:0,class:"select-none relative h20 pointer-events-none slide-enter",style:B({"--enter-stage":g-2,"--enter-step":"60ms"})},[r("span",{class:C(["absolute left--3rem top--2rem op-40 color-transparent font-serif-extra font-italic text-8em text-stroke-1 text-shadow text-stroke-hex-aaa",{"max-sm:text-5.4em":f(t)==="Upcoming"}])},i(f(t)),3)],4)),r("div",null,[(s(),F(I(t.path.includes("://")?"a":"RouterLink"),L({ref_for:!0},t.path.includes("://")?{href:t.path,target:"_blank",rel:"noopener noreferrer"}:{to:t.path},{class:"item block mb-6 mt-2 no-underline"}),{default:P(()=>[r("li",R,[r("div",Y,[t.lang==="zh"?(s(),a("span",G,"中文")):o("",!0),r("span",O,i(t.title),1)]),r("div",U,[t.redirect?(s(),a("span",W)):o("",!0),t.inperson?(s(),a("span",j)):o("",!0),t.recording||t.video?(s(),a("span",q)):o("",!0),t.radio?(s(),a("span",M)):o("",!0),t.date?(s(),a("span",A,i(l(V)(t.date,!0)),1)):o("",!0),t.duration?(s(),a("span",H,"· "+i(t.duration),1)):o("",!0),t.platform?(s(),a("span",J,"· "+i(t.platform),1)):o("",!0),t.place?(s(),a("span",K,i(t.place),1)):o("",!0),t.lang==="zh"?(s(),a("span",Q," 中文 ")):o("",!0)])])]),_:2},1040))])],64))),128))]))}});export{Z as _};
